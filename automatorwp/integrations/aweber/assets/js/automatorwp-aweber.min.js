!function(e){var t="automatorwp_aweber_";e("body").on("click",".automatorwp_settings #"+t+"authorize",function(a){a.preventDefault();var o=e(this),s=o.parent(),i=e("#"+t+"client_id").val(),n=e("#"+t+"client_secret").val(),c=s.find("#"+t+"response");if(c.length||(s.append('<div id="'+t+'response" style="display: none; margin-top: 10px;"></div>'),c=s.find("#"+t+"response")),0===i.length||0===n.length){c.addClass("automatorwp-notice-error"),c.html("All fields are required to connect with AWeber"),c.slideDown("fast");return}c.slideUp("fast"),c.attr("class",""),s.append('<span class="spinner is-active" style="float: none;"></span>'),o.prop("disabled",!0),e.post(ajaxurl,{action:"automatorwp_aweber_authorize",nonce:automatorwp_aweber.nonce,client_id:i,client_secret:n},function(e){if(c.addClass("automatorwp-notice-"+(!0===e.success?"success":"error")),c.html(void 0!==e.data.message?e.data.message:e.data),c.slideDown("fast"),s.find(".spinner").remove(),!0===e.success&&void 0!==e.data.redirect_url){window.location=e.data.redirect_url;return}o.prop("disabled",!1)})}),e("body").on("change",".automatorwp-action-aweber-add-user-list .cmb2-id-account select, .automatorwp-action-aweber-add-user-tag .cmb2-id-account select",function(t){var a=e(this).closest(".cmb-row"),o=a.next(".cmb2-id-lists"),s=e(this).val(),i=a.hasClass("is-option-change");if("any"===s||""===s||null===s)i?o.hide():o.slideUp("fast");else{var n=o.find("select.select2-hidden-accessible");n.next(".select2").remove(),n.data("table",s),n.removeAttr("data-select2-id"),automatorwp_ajax_selector(n),i?o.show():o.slideDown("fast")}a.removeClass("is-option-change")}),e("body").on("click",".automatorwp-automation-item-label > .automatorwp-option",function(t){var a=e(this).closest(".automatorwp-automation-item"),o=e(this).data("option"),s=a.find('.automatorwp-option-form-container[data-option="'+o+'"]').find(".cmb2-id-account");void 0!==s&&(s.addClass("is-option-change"),s.find("select.select2-hidden-accessible").trigger("change"))})}(jQuery);